{% extends "layouts/base.html" %}

{% block title %} Intervention - Update Point {% endblock %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<!-- [ Main Content ] start -->
<div class="grid-container">
    <div class="pcoded-main-container">
        <div class="pcoded-wrapper">
            <div class="pcoded-content">
                <div class="pcoded-inner-content">
                    <div class="main-body">
                        <div class="page-wrapper">
                            <!-- [ Main Content ] start -->
                            <form>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <h3>Intervention Settings / Algorithm Update Schedule</h3>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <div class="form-group">
                                                    <label class="form-control-label" for="update_time">When should the pJITAI algorithm update?</label>
                                                    <div class="input-group">
                                                        <select id="update_day" name="update_day" class="form-control">
                                                            {% for udur in update_duration%}
                                                            <option id="update_day_option" {% if settings.update_day==udur %} selected{% endif %}
                                                                    value="{{udur}}">{{udur}}
                                                            </option>
                                                            {%endfor%}

                                                        </select>
                                                        <!-- <div class="input-group-append">
                                                            <select id="update_hour" name="update_hour"
                                                                    class="form-control">
                                                                {% for n in range(1,13) %}
                                                                <option {% if settings.update_hour==n|string+':00am' %}
                                                                        selected{% endif %} value="{{n}}:00am">AT {{n}}:00
                                                                    AM
                                                                </option>
                                                                {% endfor %}
                                                                {% for n in range(1,13) %}
                                                                <option {% if settings.update_hour==n|string+':00pm' %}
                                                                        selected{% endif %} value="{{n}}:00pm">AT {{n}}:00
                                                                    PM
                                                                </option>
                                                                {% endfor %}
                                                            </select>
                                                        </div> -->
                                                    </div>

                                                </div>


                                            </div>

                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <!-- [ tabs ] start -->
                                    <div class="col-sm-12">

                                        <!-- <ul class="nav nav-tabs" id="myTab" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active" id="home-tab" data-toggle="tab"
                                                href="#home" role="tab" aria-controls="home" aria-selected="true">
                                                    Explanation</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="profile-tab" data-toggle="tab"
                                                href="#profile" role="tab" aria-controls="profile" aria-selected="false">HeartSteps
                                                    Example</a>
                                            </li>
                                        </ul> -->
                                        <div class="tab-content" id="myTabContent">
                                            <div class="tab-item">
                                                <h5><b>Algorithm Update Schedule</b></h5>
                                                <p>The algorithm does not learn continuously, rather it periodically updates itself based on decisions made (Option A vs B), collected participant states, and proximal outcomes recorded after each decision. From these data, the algorithm calculates the impact of each selected option on the participant’s behavior and updates its model, which in turn adjusts probabilities for future decision points.
                                                    The update process can be time consuming, especially as more data accrues, so it’s recommended to schedule updates for times when no decision points are expected to occur. Updating too frequently is not beneficial, as the algorithm needs the results of several decision points between each update to make meaningful changes to its models.</p>
                                            </div>
                                            <!-- <div class="tab-item">
                                                <h5>HeartSteps Example</h5>
                                                <p>In HeartSteps, the personalizing JITAI updated the parameters each day at
                                                    midnight because midnight is not close to any of the five decision
                                                    points. If a temporary wifi issue occurs when data is uploaded to the
                                                    cloud from a mobile device, it provides enough time for the data to be
                                                    re-uploaded if needed.</p>
                                            </div> -->

                                        </div>
                                    </div>


                                    <!-- [ tabs ] end -->
                                </div>
                                <!-- [ Main Content ] end -->
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <div class="form-group">
                                                    <a href="/intervention/settings/intervention_probability/{{project_uuid}}"
                                                    class="btn btn-outline-primary" role="button">Back</a>
                                                    <!--                                                <button type="submit" type="button" formaction="/intervention/settings/intervention_probability/{{project_uuid}}" formmethod="post" class="btn btn-outline-primary">Back</button>-->
                                                    <button type="submit" type="button"
                                                            formaction="/intervention/settings/summary/{{project_uuid}}"
                                                            formmethod="post" class="btn btn-primary">Next
                                                    </button>
                                                </div>
                                                <div class="form-group">
                                                    Last save time: {{modified_on.strftime('%b %d %Y %I:%M %p')}} UTC
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include 'includes/comments.html' %}
</div>
<!-- [ Main Content ] end -->

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script>

localStorage.setItem("update_day_option", $('#update_day_option').val());
var update_day_option = localStorage.getItem('update_day_option');
console.log(update_day_option);
</script>

{% endblock javascripts %}
