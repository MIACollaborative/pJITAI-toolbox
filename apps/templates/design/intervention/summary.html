{% extends "layouts/base.html" %}

{% block title %} Intervention - Summary {% endblock %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<!-- [ Main Content ] start -->
<div class="grid-container">
    <div class="pcoded-main-container">
        <div class="pcoded-wrapper">
            <div class="pcoded-content">
                <div class="pcoded-inner-content">
                    <div class="main-body">
                        <div class="page-wrapper">
                            <!-- [ Main Content ] start -->
                            <form>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <h3>Intervention Settings / Summary</h3>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <div class="row congratstextbox" style="margin-bottom: 30px;">
                                                    <div class="col-1">
                                                        <img src="{{ config.ASSETS_ROOT }}/images/pjitai/celebration.png"
                                                            class="img-responsive">
                                                    </div>
                                                    <div class="col-11" style="padding-left: 30px;">


                                                        <p>Great work! You have completed the intervention settings. Please review the settings below. If you want to change these or any settings later, you can go Back or use the navigation on the left. 

                                                        Next we will ask you to input Model Settings. These are the settings that will be used to establish initial values of the parameters in the model for the proximal outcome.  The closer the settings are to describing likely effects in your study, the more quickly the algorithm will personalize.

                                                        For this section, we will assume that you have access to previous results from a Micro-Randomized Trial (MRT). You will be asked about various features of your MRT data, such as the mean and standard deviation of the proximal outcome and covariates.

                                                        If you donâ€™t have such data ready to hand, you can enter estimates for the requested values from various sources, including:</p>
                                                        <ul>
                                                            <li>published information about similar intervention components</li>
                                                            <li>the HeartSteps example values, if appropriate</li>
                                                            <li>using your expertise and clinical judgement</li>
                                                        </ul>
                                                        

                                                    </div>

                                                </div>


                                                <h5>Proximal Outcome</h5>
                                                <hr>
                                                <div class="form-group">
                                                    <label class="form-control-label" for="proximal_outcome_name">Proximal outcome name</label>
                                                    <input disabled value="{{settings.get('proximal_outcome_name','')}}"
                                                        type="text" id="proximal_outcome_name"
                                                        name="proximal_outcome_name" class="form-control"
                                                        placeholder="Proximal outcome name" required>
                                                </div>

                                                <div class="form-group">
                                                    <label class="form-control-label" for="proximal_outcome_type">Outcome data type</label>
                                                    <select disabled id="proximal_outcome_type" name="proximal_outcome_type"
                                                            class="form-control" aria-label="Default select example">
                                                        <option selected>{{settings.get('proximal_outcome_type')}}</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label class="form-control-label" for="proximal_outcome_description">Proximal outcome description</label>
                                                    <input disabled value="{{settings.get('proximal_outcome_description','')}}"
                                                        type="text" id="proximal_outcome_description"
                                                        name="proximal_outcome_description" class="form-control"
                                                        placeholder="Proximal outcome description..." required>
                                                </div>

                                                <h5>Intervention Options</h5>
                                                <hr>
                                                <div class="form-group">
                                                    <label class="form-control-label" for="intervention_option_a">Intervention Option A (Higher Intensity) name</label>
                                                    <input disabled value="{{settings.get('intervention_option_a','')}}"
                                                        type="text" id="intervention_option_a"
                                                        name="intervention_option_a" class="form-control"
                                                        placeholder="Option A" required>
                                                </div>
                                                <div class="form-group">
                                                    <label class="form-control-label" for="intervention_option_b">Intervention
                                                        Option B (Lower Intensity) name</label>
                                                    <input disabled value="{{settings.get('intervention_option_b','')}}"
                                                        type="text" id="intervention_option_b"
                                                        name="intervention_option_b" class="form-control"
                                                        placeholder="Option B" required>
                                                </div>

                                                <h5>Decision Point</h5>
                                                <hr>
                                                <div class="form-group">

                                                    <select disabled id="decision_point_frequency"
                                                            name="decision_point_frequency" class="form-select"
                                                            aria-label="Default select example">
                                                        {% for n in range(1,25) %}
                                                        <option {% if settings.decision_point_frequency==n|string %}
                                                                selected{% endif %} value="{{n}}">{{n}}
                                                        </option>
                                                        {% endfor %}
                                                    </select> times per
                                                    <select disabled id="decision_point_frequency_time"
                                                            name="decision_point_frequency_time" class="form-select"
                                                            aria-label="Default select example">
                                                        {% for tm in decision_point_frequency_time %}
                                                        <option {% if settings.decision_point_frequency_time==tm %}
                                                                selected{% endif %} value="{{tm}}">{{tm}}
                                                        </option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                                <!-- <h5>Ineligibility</h5>
                                                <hr>
                                                <div class="form-group">
                                                    {% for cond,v in conditions.items() %}
                                                    <div id="condition_div_{{loop.index}}">
                                                        <label class="form-control-label" for="{{cond}}">Name of the
                                                            condition {{loop.index}}</label>
                                                        <div class="input-group mb-3">
                                                            <input value="{{v}}" type="text" class="form-control"
                                                                id="{{cond}}" name="{{cond}}" disabled>

                                                        </div>
                                                    </div>
                                                    {%endfor%}
                                                </div> -->

                                                <h5>Intervention Probability</h5>
                                                <hr>
                                                <div class="form-group">
                                                    <label class="form-control-label"
                                                        for="intervention_probability_lower_bound">Intervention probability lower bound (when eligible)</label>
                                                    <div class="input-group mb-3">
                                                        <input disabled
                                                            value="{{settings.intervention_probability_lower_bound}}"
                                                            type="text" id="intervention_probability_lower_bound"
                                                            name="intervention_probability_lower_bound"
                                                            class="form-control" required>

                                                    </div>

                                                </div>
                                                <div class="form-group">
                                                    <label class="form-control-label"
                                                        for="intervention_probability_upper_bound">Intervention probability upper bound (when eligible)</label>
                                                    <div class="input-group mb-3">
                                                        <input disabled
                                                            value="{{settings.intervention_probability_upper_bound}}"
                                                            type="text" id="intervention_probability_upper_bound"
                                                            name="intervention_probability_upper_bound"
                                                            class="form-control" required>

                                                    </div>

                                                </div>

                                                <h5>Update Point</h5>
                                                <hr>
                                                <div class="form-group">
                                                    <label class="form-control-label" for="update_time">When should the
                                                        pJITAI update?</label>
                                                    <div class="input-group">
                                                        <select id="update_day" name="update_day" class="form-control"
                                                                disabled>
                                                            {% for udur in update_duration%}
                                                            <option id="update_day_option"{% if settings.update_day==udur %} selected{% endif %}
                                                                    value="{{udur}}">{{udur}}
                                                            </option>
                                                            {%endfor%}

                                                        </select>
                                                        <!-- <div class="input-group-append">
                                                            <select id="update_hour" name="update_hour" class="form-control"
                                                                    disabled>
                                                                {% for n in range(1,13) %}
                                                                <option {% if settings.update_hour==n|string+':00am' %}
                                                                        selected{% endif %} value="{{n}}:00am">AT {{n}}:00
                                                                    AM
                                                                </option>
                                                                {% endfor %}
                                                                {% for n in range(1,13) %}
                                                                <option {% if settings.update_hour==n|string+':00pm' %}
                                                                        selected{% endif %} value="{{n}}:00pm">AT {{n}}:00
                                                                    PM
                                                                </option>
                                                                {% endfor %}
                                                            </select>
                                                        </div> -->
                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                                <!-- [ Main Content ] end -->
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <div class="form-group">                                                    <a href="/intervention/settings/update_point/{{project_uuid}}"
                                                    class="btn btn-outline-primary" role="button">Back</a>
                                                    <button type="submit" formmethod="post"
                                                            formaction="/model/settings/proximal_outcome/{{project_uuid}}"
                                                            class="btn btn-primary" role="button">Go to Model Settings
                                                    </button>
                                                </div>
                                                <div class="form-group">
                                                    Last save time: {{modified_on.strftime('%b %d %Y %I:%M %p')}} UTC
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include 'includes/comments.html' %}
</div>
<!-- [ Main Content ] end -->

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script>
var a = localStorage.getItem("update_day_option");

document.getElementById("update_day_option").value = a; 
</script>

{% endblock javascripts %}
